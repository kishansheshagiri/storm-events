<%= form_with(model: event, local: true) do |form| %>
  <% if event.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(event.errors.count, "error") %> prohibited this event from being saved:</h2>

      <ul>
      <% event.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <%= form.label :id %>
    <%= form.number_field :id, id: :event_id, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :storm_type %>
    <%= form.text_field :storm_type, id: :event_storm_type, class: "form-control" %>
  </div>

  <div class="form-group form-inline">
    <%= form.label :begin_time %>
    <%= form.datetime_select :begin_time, id: :event_begin_time, class: "form-control sr-only" %>
    <%= form.label :end_time %>
    <%= form.datetime_select :end_time, id: :event_end_time, class: "form-control sr-only" %>
  </div>

  <div class="form-inline">
    <%= form.label :state, class: "mr-sm-2" %>
    <%= collection_select(:dropdown_us_state_name, :event_id, UsState.all, :id, :name, :selected => state_id = UsState.where(:name => @event.state_name).ids, class: "custom-select mb-2 mr-sm-2 mb-sm-0" )%>
    <%= form.label :county %>
    <%= collection_select(:dropdown_us_county_name, :event_id, County.where(:us_state_id => UsState.where(:name => @event.state_name)), :id, :name, class: "custom-select mb-2 mr-sm-2 mb-sm-0") %>
  </div>

  <div class="form-group">
    <%= form.label :source %>
    <%= form.text_field :source, id: :event_source, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :forecast_office %>
    <%= form.text_field :forecast_office, id: :event_forecast_office, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :magnitude %>
    <%= form.text_field :magnitude, id: :event_magnitude, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :magnitude_type %>
    <%= form.text_field :magnitude_type, id: :event_magnitude_type, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :property_damage %>
    <%= form.text_field :property_damage, id: :event_property_damage, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :crop_damage %>
    <%= form.text_field :crop_damage, id: :event_crop_damage, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :narrative %>
    <%= form.text_field :narrative, id: :event_narrative, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :episode_id %>
    <%= form.text_field :episode_id, id: :event_episode_id, class: "form-control" %>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>
